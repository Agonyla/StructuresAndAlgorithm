package algorithm_journey.class068;

/**
 * @author: Agony
 * @create: 2024/9/5 10:24
 * @describe:
 * @link:
 */
public class Code01_DistinctSubsequences {

    // todo
    //
    // ä¸åŒçš„å­åºåˆ—
    //
    // èƒ½ä¸èƒ½è‡ªå·±å…ˆåšä¸€ä¸‹æš´åŠ›é€’å½’ï¼Œç„¶åæ…¢æ…¢æ”¹æˆåŠ¨æ€è§„åˆ’â•â•â•
    //
    // æš´åŠ›é€’å½’ï¼šçŒœæƒ³
    // è®¾è®¡ int f(char[] str, char[] target, int i, int j) -> è¿”å›åœ¨strä¸­å‰iä¸ªå­—ç¬¦ç»„æˆçš„å­åºåˆ—èƒ½å¤Ÿä¸¥æ ¼ç­‰äºtargetä¸­å‰jä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² çš„ä¸ªæ•°
    // base case
    // è¿™é‡Œå¯èƒ½æœ‰é—®é¢˜ğŸ™‹ğŸ™‹ğŸ™‹
    // i==0 -> return 0    ||  j==0 -> return 1  â“â“â“
    // j==0 -> return 0    ||  i==0&&j==0 -> return 1  â“â“â“
    // å¯èƒ½æ€§
    // 1. str[i]==str[j]
    // -> è°ƒç”¨ f(i-1,j) + f(i-1, j-1)
    // è§£é‡Šï¼š
    // f(i-1,j)è¡¨ç¤ºä¸ä½¿ç”¨å½“å‰å­—ç¬¦åŒ¹é…å»å‰é¢æ‰¾åˆ«çš„å­—ç¬¦åŒ¹é…
    // f(i-1,j-1)è¡¨ç¤ºä½¿ç”¨å½“å‰å­—ç¬¦åŒ¹é…ï¼Œç„¶åå»åŒ¹é…targetçš„å‰ä¸€ä¸ªå­—ç¬¦
    // 2. str[i]!=str[j]
    // -> è°ƒç”¨ f(i-1)
    // .... å…ˆçŒœæƒ³åˆ°è¿™é‡Œ
    //
    // åº”è¯¥ä¹Ÿå¯ä»¥å’Œclass067çš„ç¬¬ä¸€é¢˜ç±»ä¼¼ï¼Œæœ‰ä»(i,j)ä½ç½®å‡ºå‘åˆ°æœ«å°¾çš„çš„æ€»ä¸ªæ•°
    // è®¾è®¡ int f(char[] str, char[] target, int i, int j) -> è¿”å›åœ¨strä¸­ä»ç¬¬iä¸ªå­—ç¬¦å¼€å§‹åˆ°æœ«å°¾ç»„æˆçš„å­åºåˆ—èƒ½å¤Ÿä¸¥æ ¼ç­‰äºtargetä¸­ä»ç¬¬jä¸ªå­—ç¬¦å¼€å§‹åˆ°æœ«å°¾ç»„æˆçš„å­—ç¬¦ä¸² çš„ä¸ªæ•°
    //
    //
    // åŠ¨æ€è§„åˆ’
    // è®¾è®¡ int[][] dp = new int[m][n]
    // m -> str.length
    // n -> target.length
    // dp[i][j]è¡¨ç¤º åœ¨strä¸­å‰iä¸ªå­—ç¬¦ç»„æˆçš„å­åºåˆ—èƒ½å¤Ÿä¸¥æ ¼ç­‰äºtargetä¸­å‰jä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² çš„ä¸ªæ•°
    // å³ targetå‰jä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œåœ¨strå‰iä¸ªå­—ç¬¦ç»„æˆçš„å­åºåˆ—èƒ½ä½¿å…¶ç­‰äºå‰è€…(targetå‰jä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²)çš„ä¸ªæ•°
    // å½“æ¥åˆ°(i,j)ä½ç½®æ—¶
    // æƒ…å†µåˆ†æ
    // 1. ä¸è¦str[i]çš„å­—ç¬¦
    // dp[i][j] = dp[i-1][j]
    // 2. è¦str[i]çš„å­—ç¬¦
    // åªæœ‰å½“ str[i]==str[j]æ—¶
    // dp[i][j] += dp[i-1][j-1]
    // dp[0][0]=1
    // å¡«è¡¨é¡ºåºï¼šä»å·¦å¾€å³ï¼Œä»ä¸Šå¾€ä¸‹
    //
    // åŠ¨æ€è§„åˆ’ + ç©ºé—´å‹ç¼©
    // ä¸€ç»´ä»£æ›¿äºŒç»´
    // æ¯ä¸€ä¸ªä½ç½®ä¾èµ–ä¸Šæ–¹å’Œå·¦ä¸Šæ–¹çš„å€¼
    // dpä»å³å¾€å·¦å¡«
    // æ¥åˆ°iä½ç½®
    // dp[i]è¡¨ç¤ºä¸Šæ–¹çš„å€¼
    // dp[i-1]è¡¨ç¤ºå·¦ä¸Šæ–¹çš„å€¼


    // gptç­”æ¡ˆ
    public static class DistinctSubsequences {


        public static void main(String[] args) {
            DistinctSubsequences ds = new DistinctSubsequences();
            String s = "rabbbit";
            String t = "rabbit";
            System.out.println(ds.numDistinct1(s, t)); // è¾“å‡º 3
        }

        /**
         * æš´åŠ›é€’å½’
         *
         * @param s
         * @param t
         * @return
         */
        public int numDistinct1(String s, String t) {
            return countSubsequences(s, t, 0, 0);
        }


        private int countSubsequences(String s, String t, int i, int j) {
            // å¦‚æœ t å·²ç»åŒ¹é…å®Œï¼Œè¯´æ˜æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…çš„å­åºåˆ—
            if (j == t.length()) {
                return 1;
            }
            // å¦‚æœ s å·²ç»åŒ¹é…å®Œï¼Œä½† t è¿˜æ²¡æœ‰åŒ¹é…å®Œï¼Œè¯´æ˜æ²¡æœ‰åŒ¹é…æˆåŠŸ
            if (i == s.length()) {
                return 0;
            }

            // å¦‚æœå½“å‰å­—ç¬¦åŒ¹é…ä¸Š
            if (s.charAt(i) == t.charAt(j)) {
                // ä¸¤ç§é€‰æ‹©ï¼šåŒ¹é…è¿™ä¸ªå­—ç¬¦ï¼Œæˆ–è€…è·³è¿‡è¿™ä¸ªå­—ç¬¦
                return countSubsequences(s, t, i + 1, j + 1) + countSubsequences(s, t, i + 1, j);
            } else {
                // å½“å‰å­—ç¬¦ä¸åŒ¹é…ï¼Œåªèƒ½è·³è¿‡ s çš„å½“å‰å­—ç¬¦
                return countSubsequences(s, t, i + 1, j);
            }
        }


        /**
         * åŠ¨æ€è§„åˆ’
         *
         * @param s
         * @param t
         * @return
         */
        public int numDistinct2(String s, String t) {
            int m = s.length();
            int n = t.length();

            // å®šä¹‰ dp æ•°ç»„ï¼Œdp[i][j] è¡¨ç¤º s[i..] ä¸­çš„å­åºåˆ—ä¸­ç­‰äº t[j..] çš„å­åºåˆ—ä¸ªæ•°
            int[][] dp = new int[m + 1][n + 1];

            // åˆå§‹åŒ–è¾¹ç•Œæ¡ä»¶
            // å½“ t åŒ¹é…å®Œäº†ï¼Œdp[i][n] = 1ï¼Œå› ä¸ºç©ºå­—ç¬¦ä¸² t å¯ä»¥ä» s çš„ä»»ä½•å­åºåˆ—ä¸­åŒ¹é…å‡ºæ¥
            for (int i = 0; i <= m; i++) {
                dp[i][n] = 1;
            }

            // å½“ s åŒ¹é…å®Œäº†ï¼Œä½† t æ²¡æœ‰åŒ¹é…å®Œï¼Œdp[m][j] = 0 (é™¤äº† dp[m][n] = 1)
            // å…¶å® dp[m][j] çš„åˆå§‹å€¼å·²ç»æ˜¯ 0ï¼Œå› æ­¤ä¸éœ€è¦ç‰¹åˆ«åˆå§‹åŒ–

            // ä»åå‘å‰å¡«è¡¨
            for (int i = m - 1; i >= 0; i--) {
                for (int j = n - 1; j >= 0; j--) {
                    if (s.charAt(i) == t.charAt(j)) {
                        // åŒ¹é… s[i] å’Œ t[j]ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼šåŒ¹é…æˆ–ä¸åŒ¹é…
                        dp[i][j] = dp[i + 1][j + 1] + dp[i + 1][j];
                    } else {
                        // ä¸åŒ¹é…ï¼Œåªèƒ½è·³è¿‡ s[i]
                        dp[i][j] = dp[i + 1][j];
                    }
                }
            }

            // dp[0][0] è¡¨ç¤ºä» s çš„å¼€å¤´å¼€å§‹åŒ¹é… t çš„å¼€å¤´ï¼Œç»“æœå°±æ˜¯ç­”æ¡ˆ
            return dp[0][0];
        }


    }

}
